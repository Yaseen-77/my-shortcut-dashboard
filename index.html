<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Shortcuts</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="dashboard" id="dashboard"></div>

  <div class="popup" id="popup">
    <input type="text" id="name" placeholder="Name" />
    <input type="text" id="link" placeholder="Website URL" />
    <button onclick="addShortcut()">Add</button>
    <button onclick="togglePopup()">Cancel</button>
  </div>

  <script>
  const dashboard = document.getElementById("dashboard");
  const popup = document.getElementById("popup");
  const nameInput = document.getElementById("name");
  const linkInput = document.getElementById("link");

  let shortcuts = JSON.parse(localStorage.getItem("shortcuts")) || [];

  function togglePopup() {
  const isVisible = popup.style.display === "flex";
  popup.style.display = isVisible ? "none":"flex";
  if (!isVisible) {
    nameInput.value = "";
    linkInput.value = "";
  }
}

  function renderShortcuts() {
    dashboard.innerHTML = "";
    shortcuts.forEach((sc, index) => {
      const div = document.createElement("div");
      div.className = "shortcut";
      div.innerHTML = `
        <button class="remove-btn" onclick="removeShortcut(${index})">Ã—</button>
        <a href="${sc.link}" target="_blank">
          <img src="https://www.google.com/s2/favicons?domain=${sc.link}" alt="icon" />
          <span>${sc.name}</span>
        </a>
      `;
      dashboard.appendChild(div);
    });

    const addDiv = document.createElement("div");
    addDiv.className = "shortcut add";
    addDiv.innerHTML = `<div class="plus" onclick="togglePopup()">+</div><span>Add shortcut</span>`;
    dashboard.appendChild(addDiv);
  }

  function togglePopup() {
    const isVisible = popup.style.display === "flex";
    popup.style.display = isVisible ? "none" : "flex";
    if (!isVisible) {
      nameInput.value = "";
      linkInput.value = "";
    }
  }

  function addShortcut() {
    const name = nameInput.value.trim();
    const link = linkInput.value.trim();
    if (!name || !link) return;
    shortcuts.push({ name, link });
    localStorage.setItem("shortcuts", JSON.stringify(shortcuts));
    togglePopup();
    renderShortcuts();
  }

  function removeShortcut(index) {
    shortcuts.splice(index, 1);
    localStorage.setItem("shortcuts", JSON.stringify(shortcuts));
    renderShortcuts();
  }

  renderShortcuts();
</script>

</body>
</html>
